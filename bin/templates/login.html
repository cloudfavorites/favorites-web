<html >
  <link rel="shortcut icon" type="image/png" th:href="@{/images/favicon.png}"></link>
  <link th:href="@{/css/index.css}" rel="stylesheet"></link>
  <body>
    <div class="form-page" id="loginPage">
	  <div class="form">
	    <span class="register-form">
			<form >
		      <input type="text" placeholder="username" v-model="username"/>
		      <input type="password" placeholder="password" v-model="password" />
		      <input type="text" placeholder="email address" v-model="email"/>
		    </form>	    
		    <button v-on:click="create">create</button>
		    <p class="message">Already registered? <a href="#">Sign In</a></p>
	    </span>
	    <span class="login-form"> 
		    <form >
		      <input type="text" placeholder="username" v-model="username"/>
		      <input type="password" placeholder="password" v-model="password"/>
		    </form>
		    <button v-on:click="login">login</button>
		    <p class="message">Not registered? <a href="#">Create an account</a></p>
	    </span>
	  </div>
	</div>
  </body>
   <script th:src="@{/webjars/jquery/2.2.4/dist/jquery.min.js}"></script>   
   <script th:src="@{/webjars/vue/1.0.24/vue.min.js}"></script>   
   <script th:src="@{/webjars/vue-resource/0.7.0/dist/vue-resource.min.js}"></script>   
    <script type='text/javascript'>
      Vue.http.options.emulateJSON = true; 
        var loginPage = new Vue({
            el: '#loginPage',
            data: {
                'username': '',
                'email': '',
                'password': ''
            },
            methods: {
            	login: function(event){
            		 if(this.username == '' || this.password==''){
            			 alert("用户名或者密码不能为空！");
            			 return;
            		 }
            		var datas={
            				 userName: this.username,
            				 passWord: this.password
	            			 };
            	     this.$http.post('/user/login',datas).then(function(response){
            	    	 if(response.data.rspCode == '000000'){
            	    		  window.open('/', '_self');
            	    	 }else{
            	    		  console.log(response.data.rspMsg);
            	    		  alert(response.data.rspMsg);
            	    	 }
                     }, function(response){
                         console.log('error');
                     })
                },
                create: function(event){
                	 if(this.username == '' || this.password=='' || this.email==''){
            			 alert("参数不能为空！");
            			 return;
            		 }
               	    var datas={
               	    		 userName: this.username,
               				 email:this.email,
               				 passWord: this.password
                   			 };
            	     this.$http.post('/user/create',datas).then(function(response){
            	    	 if(response.data.rspCode == '000000'){
	           	    		  window.open('/login', '_self');
	           	    	 }else{
	           	    		  console.log(response.data.rspMsg);
	           	    		  alert(response.data.rspMsg);
	           	    	 }
                     }, function(response){
                         console.log('error');
                     })
                }
            }
        })
    </script>
	<script type="text/javascript">
	$('.message a').click(function(){
		   $('span').animate({height: "toggle", opacity: "toggle"}, "slow");
		});
	</script>
</html>
